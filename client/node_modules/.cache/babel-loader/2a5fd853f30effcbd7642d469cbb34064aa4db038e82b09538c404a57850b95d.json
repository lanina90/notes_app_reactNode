{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { fetchAllNotes, createNote, deleteNote, editNote } from \"../services/api\";\nconst initialState = {\n  notes: []\n};\nexport const fetchNotes = createAsyncThunk(\"notes/fetchNotes\", async () => {\n  return await fetchAllNotes();\n});\nexport const createNewNote = createAsyncThunk(\"notes/createNewNote\", async noteData => {\n  try {\n    return await createNote(noteData);\n  } catch (e) {\n    console.log('createNewNote', e);\n  }\n});\nexport const deleteOneNote = createAsyncThunk(\"notes/deleteOneNote\", async id => {\n  try {\n    return await deleteNote(id);\n  } catch (e) {\n    console.log('createNewNote', e);\n  }\n});\nexport const editOneNote = createAsyncThunk(\"notes/editOneNote\", async ({\n  id,\n  noteData\n}) => {\n  try {\n    return await editNote(id, noteData);\n  } catch (e) {\n    console.log('createNewNote', e);\n  }\n});\nconst notesSlice = createSlice({\n  name: 'notes',\n  initialState,\n  reducers: {\n    toggleArchive: (state, action) => {\n      const id = action.payload;\n      const toggledNote = state.notes.find(note => note.id === id);\n      if (toggledNote) {\n        toggledNote.archived = !toggledNote.archived;\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(createNewNote.fulfilled, (state, action) => {\n      state.notes.push(action.payload);\n    });\n    builder.addCase(fetchNotes.fulfilled, (state, action) => {\n      state.notes = action.payload.flat();\n    });\n    builder.addCase(deleteOneNote.fulfilled, (state, action) => {\n      state.notes = state.notes.filter(note => note.id !== action.payload);\n    });\n    builder.addCase(editOneNote.fulfilled, (state, action) => {\n      const {\n        id,\n        title,\n        category,\n        content,\n        dates\n      } = action.payload;\n      const noteToEdit = state.notes.find(note => note.id === id);\n      if (noteToEdit) {\n        noteToEdit.title = title;\n        noteToEdit.category = category;\n        noteToEdit.content = content;\n        noteToEdit.dates = dates;\n      }\n    });\n  }\n});\nexport const {\n  toggleArchive\n} = notesSlice.actions;\nexport default notesSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","fetchAllNotes","createNote","deleteNote","editNote","initialState","notes","fetchNotes","createNewNote","noteData","e","console","log","deleteOneNote","id","editOneNote","notesSlice","name","reducers","toggleArchive","state","action","payload","toggledNote","find","note","archived","extraReducers","builder","addCase","fulfilled","push","flat","filter","title","category","content","dates","noteToEdit","actions","reducer"],"sources":["C:/Users/Admin/WebstormProjects/Front/radency_company/notes_app_reactNodeJS/client/src/store/notesSlice.tsx"],"sourcesContent":["import {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\"\r\nimport {fetchAllNotes, createNote, deleteNote, editNote} from \"../services/api\";\r\n\r\nexport type NoteType = {\r\n  id: any\r\n  title: string\r\n  category: string\r\n  content: string\r\n  created: string\r\n  dates: string\r\n  archived: boolean\r\n}\r\n\r\nexport type NoteEditType = {\r\n  id: any\r\n  title: string\r\n  category: string\r\n  content: string\r\n  dates: string\r\n}\r\n\r\ntype NotesStateType = {\r\n  notes: NoteType[]\r\n}\r\n\r\nconst initialState: NotesStateType = {\r\n  notes: []\r\n}\r\n\r\nexport const fetchNotes = createAsyncThunk(\r\n  \"notes/fetchNotes\",\r\n  async () => {\r\n    return await fetchAllNotes()\r\n  }\r\n);\r\n\r\nexport const createNewNote = createAsyncThunk(\r\n  \"notes/createNewNote\",\r\n  async (noteData: NoteType) => {\r\n    try{\r\n      return await createNote(noteData);\r\n    } catch (e) {\r\n      console.log('createNewNote', e)\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteOneNote = createAsyncThunk(\r\n  \"notes/deleteOneNote\",\r\n  async (id: number) => {\r\n    try{\r\n      return await deleteNote(id);\r\n    } catch (e) {\r\n      console.log('createNewNote', e)\r\n    }\r\n  }\r\n);\r\n\r\nexport const editOneNote = createAsyncThunk(\r\n  \"notes/editOneNote\",\r\n  async ({ id, noteData }: { id: number, noteData: NoteType }) => {\r\n    try{\r\n      return await editNote(id, noteData);\r\n    } catch (e) {\r\n      console.log('createNewNote', e)\r\n    }\r\n  }\r\n);\r\n\r\nconst notesSlice = createSlice({\r\n  name: 'notes',\r\n  initialState,\r\n  reducers: {\r\n    toggleArchive: (state, action: PayloadAction<number>) => {\r\n      const id = action.payload\r\n      const toggledNote = state.notes.find(note => note.id === id)\r\n      if (toggledNote) {\r\n        toggledNote.archived = !toggledNote.archived\r\n      }\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(createNewNote.fulfilled, (state, action) => {\r\n      state.notes.push(action.payload);\r\n    })\r\n    builder.addCase(fetchNotes.fulfilled, (state, action) => {\r\n      state.notes = action.payload.flat();\r\n    })\r\n    builder.addCase(deleteOneNote.fulfilled, (state, action) => {\r\n      state.notes = state.notes.filter((note) => note.id !== action.payload)\r\n    })\r\n    builder.addCase(editOneNote.fulfilled, (state, action) => {\r\n      const {id, title, category, content, dates} = action.payload\r\n      const noteToEdit = state.notes.find((note) => note.id === id)\r\n      if (noteToEdit) {\r\n        noteToEdit.title = title\r\n        noteToEdit.category = category\r\n        noteToEdit.content = content\r\n        noteToEdit.dates = dates\r\n      }\r\n    })\r\n  },\r\n})\r\n\r\nexport const {\r\n  toggleArchive\r\n} = notesSlice.actions\r\n\r\n\r\nexport default notesSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}