{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { fetchAllNotes, createNote, deleteNote } from \"../services/api\";\nconst initialState = {\n  notes: []\n};\nexport const fetchNotes = createAsyncThunk(\"notes/fetchNotes\", async () => {\n  return await fetchAllNotes();\n});\nexport const createNewNote = createAsyncThunk(\"notes/createNewNote\", async noteData => {\n  try {\n    const response = await createNote(noteData);\n    console.log('createNewNote', response);\n    return response;\n  } catch (e) {\n    console.log('createNewNote', e);\n  }\n});\nexport const deleteOneNote = createAsyncThunk(\"notes/createNewNote\", async id => {\n  try {\n    const response = await deleteNote(id);\n    console.log('createNewNote', response);\n    return response;\n  } catch (e) {\n    console.log('createNewNote', e);\n  }\n});\nconst notesSlice = createSlice({\n  name: 'notes',\n  initialState,\n  reducers: {\n    editNote: (state, action) => {\n      const {\n        id,\n        title,\n        category,\n        content,\n        dates\n      } = action.payload;\n      const noteToEdit = state.notes.find(note => note.id === id);\n      if (noteToEdit) {\n        noteToEdit.title = title;\n        noteToEdit.category = category;\n        noteToEdit.content = content;\n        noteToEdit.dates = dates;\n      }\n    },\n    toggleArchive: (state, action) => {\n      const id = action.payload;\n      const toggledNote = state.notes.find(note => note.id === id);\n      if (toggledNote) {\n        toggledNote.archived = !toggledNote.archived;\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(createNewNote.fulfilled, (state, action) => {\n      state.notes.push(action.payload);\n    });\n    builder.addCase(fetchNotes.fulfilled, (state, action) => {\n      state.notes = action.payload.flat();\n    });\n    builder.addCase(deleteOneNote.fulfilled, (state, action) => {\n      state.notes = state.notes.filter(note => note.id !== action.payload);\n    });\n  }\n});\nexport const {\n  editNote,\n  toggleArchive\n} = notesSlice.actions;\nexport default notesSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","fetchAllNotes","createNote","deleteNote","initialState","notes","fetchNotes","createNewNote","noteData","response","console","log","e","deleteOneNote","id","notesSlice","name","reducers","editNote","state","action","title","category","content","dates","payload","noteToEdit","find","note","toggleArchive","toggledNote","archived","extraReducers","builder","addCase","fulfilled","push","flat","filter","actions","reducer"],"sources":["C:/Users/Admin/WebstormProjects/Front/radency_company/notes_app_reactNodeJS/client/src/store/notesSlice.tsx"],"sourcesContent":["import {createAsyncThunk, createSlice, PayloadAction} from \"@reduxjs/toolkit\"\r\nimport {fetchAllNotes, createNote, deleteNote} from \"../services/api\";\r\n\r\nexport type NoteType = {\r\n  id: any\r\n  title: string\r\n  category: string\r\n  content: string\r\n  created: string\r\n  dates: string\r\n  archived: boolean\r\n}\r\n\r\nexport type NoteEditType = {\r\n  id: any\r\n  title: string\r\n  category: string\r\n  content: string\r\n  dates: string\r\n}\r\n\r\ntype NotesStateType = {\r\n  notes: NoteType[]\r\n}\r\n\r\nconst initialState: NotesStateType = {\r\n  notes: []\r\n}\r\n\r\nexport const fetchNotes = createAsyncThunk(\r\n  \"notes/fetchNotes\",\r\n  async () => {\r\n    return await fetchAllNotes()\r\n  }\r\n);\r\n\r\nexport const createNewNote = createAsyncThunk(\r\n  \"notes/createNewNote\",\r\n  async (noteData: NoteType) => {\r\n    try{\r\n      const response = await createNote(noteData);\r\n      console.log('createNewNote', response)\r\n      return response;\r\n    } catch (e) {\r\n      console.log('createNewNote', e)\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteOneNote = createAsyncThunk(\r\n  \"notes/createNewNote\",\r\n  async (id: number) => {\r\n    try{\r\n      const response = await deleteNote(id);\r\n      console.log('createNewNote', response)\r\n      return response;\r\n    } catch (e) {\r\n      console.log('createNewNote', e)\r\n    }\r\n  }\r\n);\r\n\r\nconst notesSlice = createSlice({\r\n  name: 'notes',\r\n  initialState,\r\n  reducers: {\r\n    editNote: (state, action: PayloadAction<NoteEditType>) => {\r\n      const {id, title, category, content, dates} = action.payload\r\n      const noteToEdit = state.notes.find((note) => note.id === id)\r\n      if (noteToEdit) {\r\n        noteToEdit.title = title\r\n        noteToEdit.category = category\r\n        noteToEdit.content = content\r\n        noteToEdit.dates = dates\r\n      }\r\n    },\r\n    toggleArchive: (state, action: PayloadAction<number>) => {\r\n      const id = action.payload\r\n      const toggledNote = state.notes.find(note => note.id === id)\r\n      if (toggledNote) {\r\n        toggledNote.archived = !toggledNote.archived\r\n      }\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(createNewNote.fulfilled, (state, action) => {\r\n      state.notes.push(action.payload);\r\n    })\r\n    builder.addCase(fetchNotes.fulfilled, (state, action) => {\r\n      state.notes = action.payload.flat();\r\n    })\r\n    builder.addCase(deleteOneNote.fulfilled, (state, action) => {\r\n      state.notes = state.notes.filter((note) => note.id !== action.payload)\r\n    })\r\n  },\r\n})\r\n\r\nexport const {\r\n  editNote,\r\n  toggleArchive\r\n} = notesSlice.actions\r\n\r\n\r\nexport default notesSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}